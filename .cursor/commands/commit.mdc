# Conventional Commit Preparation Workflow

Run this checklist whenever you’re about to craft a commit message. It keeps the message aligned with Conventional Commit rules, reflects the real diff, and documents notable side effects.

---

## 1. Refresh Local Context
1. `git status --short` – confirm staged vs unstaged files.
2. `git diff` – review unstaged changes; stage anything missing (`git add -p` helps).
3. `git diff --cached` – read the exact staged diff that will make the commit.
4. `git log --oneline --max-count=10` – remind yourself of recent subjects and scopes.

## 2. Determine Conventional Commit Header
- Select the **type** (`feat`, `fix`, `docs`, `test`, `refactor`, `build`, `chore`, etc.) that best reflects the primary change.
- Derive the **scope** from the main area touched (e.g. `backend`, `frontend`, `tox`, `docs`, `scripts`). If multiple areas changed, pick the most significant or use a composite scope (`backend+frontend`).
- Craft a short **summary** (≤ 72 chars) describing the outcome, not the implementation.

Example header: `test(backend): expand meeting service coverage`.

## 3. Compose Body Details (Optional but Encouraged)
For non-trivial commits:
- Summarize *what* changed and *why* (1–2 bullets or sentences).
- Mention notable follow-up tasks or risks.
- Reference linked issues using `Refs:` or `Closes:` when applicable.

## 4. Capture Testing & Verification
If you ran commands (e.g. `tox -e py311-test`, `pnpm test`, `scripts/dev_stack.sh`), list them in a block like:
```
Test: tox -e ci
Test: scripts/dev_stack.sh (manual)
```

## 5. Assemble the Commit Message
1. Start with the Conventional Commit header.
2. Add a blank line.
3. Include the body and “Test” lines as needed.

## 6. Final Review Before Commit
- Re-run `git diff --cached` to ensure the message matches the staged diff.
- If new files were generated (coverage reports, lockfiles, etc.), ensure they’re intentionally tracked or ignored.
- Once confident, run `git commit` (or your tooling) and supply the prepared message verbatim.

Following this playbook keeps the history consistent, informative, and easy to follow.
